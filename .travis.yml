language: java
before_install:
- echo $GPG_SECRET_KEYS | base64 --decode | $GPG_EXECUTABLE --import --batch || true
jdk:
- openjdk8
- openjdk11
install:
- mvn --settings .maven.xml install -DskipTests=true -Dgpg.skip -Dmaven.javadoc.skip=true
  -B -V
after_success:
- bash <(curl -s https://codecov.io/bash)
deploy:
- provider: script
  script: mvn clean deploy --settings .maven.xml -DskipTests=true -B -U -Prelease
  edge: true
  on:
    tags: true
    jdk: openjdk8
    branch: main
notifications:
  slack:
    if: branch = main
    on_pull_requests: false
    on_success: never
    on_failure: change
    rooms:
      secure: Vj3An8RbvEaZdlDY6dwJcaIz2jfyiin+BweYzLb0ynFww2l/5bFQJ4nLKRy/NgVjM4s43Oq5FxveHhqohv0HNIO62JI1h89HhnQNtLezM/6T+/is+hW9UbHAEQJwdIwv/JQFRxhDDj2VeRhCLmKyuUeGKLV+rc5ZrogjjJMLyto=
